# ============================================================================
# PRODUCTION ENVIRONMENT CONFIGURATION
# Maryland Benefits Navigator (JAWN)
# ============================================================================
#
# Setup Instructions:
#   1. Copy this file: cp .env.production.example .env
#   2. Generate secrets (see commands below)
#   3. Fill in all REQUIRED variables
#   4. Add optional variables as needed
#   5. NEVER commit .env to version control
#
# Documentation: See PRODUCTION_ENV_SETUP.md for detailed setup instructions
#
# ============================================================================

# ============================================================================
# DATABASE (Auto-configured on Replit)
# ============================================================================

# PostgreSQL connection string (provided automatically by Replit)
# Format: postgresql://user:password@host:5432/dbname?sslmode=require
DATABASE_URL=

# Optional: Connection pool settings (defaults work for most cases)
# DB_POOL_MIN=2
# DB_POOL_MAX=10

# ============================================================================
# SECURITY (REQUIRED)
# ============================================================================

# Encryption Key for PII (SSNs, bank accounts, tax data)
# Generate with: openssl rand -hex 32
# Format: 64-character hexadecimal string (32 bytes)
ENCRYPTION_KEY=

# Optional: Previous encryption key for rotation support
# ENCRYPTION_KEY_PREVIOUS=

# Session Secret for cookie signing
# Generate with: openssl rand -base64 64
# Format: 64+ character string (minimum 32)
SESSION_SECRET=

# CORS Allowed Origins (production domains only, comma-separated)
# Example: https://marylandbenefits.gov,https://www.marylandbenefits.gov
# Never use wildcard (*) in production
ALLOWED_ORIGINS=

# ============================================================================
# AI SERVICES (REQUIRED)
# ============================================================================

# Google Gemini API Key (preferred)
# Get from: https://aistudio.google.com/app/apikey
GEMINI_API_KEY=

# Alternative: Google API Key (fallback)
# GOOGLE_API_KEY=

# ============================================================================
# OBJECT STORAGE (REQUIRED)
# ============================================================================

# RECOMMENDED: Use Replit's built-in Object Storage (auto-configured)
# If using Replit Object Storage, these are set automatically:
# PUBLIC_OBJECT_SEARCH_PATHS=
# PRIVATE_OBJECT_DIR=

# ALTERNATIVE: Google Cloud Storage (Advanced - only if needed)
# ⚠️ SECURITY WARNING: Never upload raw JSON credentials to files!
# ⚠️ Use base64-encoded secrets in Replit Secrets instead

# GCS Bucket Name
# GCS_BUCKET_NAME=jawn-production-documents

# GCS Service Account (Base64-encoded JSON - store in Replit Secrets)
# Generate: base64 -i gcs-credentials.json | tr -d '\n'
# Then DELETE the original JSON file immediately
# GCS_SERVICE_ACCOUNT_BASE64=

# Runtime decoding required - see PRODUCTION_ENV_SETUP.md for implementation

# ============================================================================
# DISTRIBUTED CACHING (Optional - Recommended for multi-instance deployments)
# ============================================================================

# Option A: Standard Redis (with TLS recommended)
# Format: redis://user:pass@host:6379 or rediss://user:pass@host:6379
# REDIS_URL=

# Option B: Upstash Redis REST API (Recommended for Replit)
# Get from: https://console.upstash.com
# UPSTASH_REDIS_REST_URL=
# UPSTASH_REDIS_REST_TOKEN=

# Note: Without Redis, application uses in-memory cache (single instance only)

# ============================================================================
# EMAIL NOTIFICATIONS (Optional)
# ============================================================================

# SMTP Server Configuration
# Example providers: Gmail, SendGrid, AWS SES, Mailgun

# SMTP_HOST=smtp.gmail.com
# SMTP_PORT=587
# SMTP_USER=notifications@yourdomain.com
# SMTP_PASS=your-app-specific-password
# SMTP_FROM_EMAIL=noreply@yourdomain.com

# Gmail Setup: Enable 2FA → Generate app-specific password
# SendGrid: Use 'apikey' as user, API key as password

# ============================================================================
# ERROR TRACKING (Optional - Recommended for production)
# ============================================================================

# Sentry Error Monitoring
# Get from: https://sentry.io (free tier available)
# Format: https://<key>@<org>.ingest.sentry.io/<project>

# SENTRY_DSN=
# SENTRY_ENVIRONMENT=production
# SENTRY_TRACES_SAMPLE_RATE=0.1
# SENTRY_PROFILES_SAMPLE_RATE=0.1

# ============================================================================
# EXTERNAL APIS (Optional)
# ============================================================================

# PolicyEngine API (optional - public API works without credentials)
# Only needed for premium features
# POLICYENGINE_CLIENT_ID=
# POLICYENGINE_CLIENT_SECRET=

# Data.gov API Key (optional - for legislative tracking)
# Get from: https://api.data.gov/signup/
# DATA_GOV_API_KEY=

# ============================================================================
# OPERATIONAL SETTINGS
# ============================================================================

# Environment (required for secure cookies and production validations)
NODE_ENV=production

# Server Port
PORT=5000

# Logging Level (debug, info, warn, error)
LOG_LEVEL=info

# ============================================================================
# RATE LIMITING & PERFORMANCE
# ============================================================================

# Rate Limiting
# Default: 100 requests per 15 minutes (900000ms)
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# Request Size Limits (MB)
MAX_REQUEST_SIZE_MB=10

# ============================================================================
# FEATURE FLAGS (Optional)
# ============================================================================

# ENABLE_AI_FALLBACK=true
# ENABLE_CACHE=true
# CACHE_TTL_SECONDS=3600

# ============================================================================
# QUICK SETUP COMMANDS
# ============================================================================
#
# Generate Encryption Key:
#   openssl rand -hex 32
#
# Generate Session Secret:
#   openssl rand -base64 64
#
# Test Configuration:
#   npm run dev
#   curl http://localhost:5000/api/health
#
# Production Validation:
#   NODE_ENV=production npm start
#
# ============================================================================
# CRITICAL SECURITY REMINDERS
# ============================================================================
#
# ✅ DO:
#   - Use Replit Secrets for all sensitive values
#   - Rotate encryption keys annually
#   - Use strong session secrets (64+ characters)
#   - Restrict CORS to specific domains (no wildcards)
#   - Enable HTTPS/TLS for all connections
#   - Use service accounts with minimal permissions
#
# ❌ DON'T:
#   - Commit .env files to version control
#   - Share secrets via email/chat
#   - Use production secrets in development
#   - Use default/example values in production
#   - Expose secrets in logs
#   - Use wildcard CORS (*)
#
# ============================================================================
